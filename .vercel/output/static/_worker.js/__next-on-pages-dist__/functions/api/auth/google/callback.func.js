var z=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var Z=Object.prototype.hasOwnProperty;var ee=(a,h)=>()=>(a&&(h=a(a=0)),h);var X=(a,h,M,k)=>{if(h&&typeof h=="object"||typeof h=="function")for(let d of Y(h))!Z.call(a,d)&&d!==M&&z(a,d,{get:()=>h[d],enumerable:!(k=V(h,d))||k.enumerable});return a},G=(a,h,M)=>(X(a,h,"default"),M&&X(M,h,"default"));var te=a=>X(z({},"__esModule",{value:!0}),a);var U={};import*as st from"async_hooks";var J=ee(()=>{G(U,st)});import{__getNamedExports as _e}from"../../../../../__next-on-pages-dist__/webpack/95defae3b0f638c9e2b17768f7bdc16d.js";import{__getNamedExports as ne}from"../../../../../__next-on-pages-dist__/webpack/3a252789024301da0cd81da4b087e4e7.js";import{__getNamedExports as oe}from"../../../../../__next-on-pages-dist__/webpack/35ca8f597ed624e1d44d49013bcf9361.js";import{__getNamedExports as ce}from"../../../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var m=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/auth/google/callback"),I=_e(m,m,m),ae=I.__chunk_4325,re=I.__chunk_2813,ue=I.__chunk_9560,se=I.__chunk_9160,ie=I.__chunk_6079,he=I.__chunk_3611,pe=I.__chunk_129,i=ne(m,m,m),le=i.__chunk_4381,ke=i.__chunk_737,de=i.__chunk_9470,ge=i.__chunk_2672,fe=i.__chunk_2600,me=i.__chunk_636,xe=i.__chunk_8364,be=i.__chunk_7246,ye=i.__chunk_2855,Ee=i.__chunk_6637,ve=i.__chunk_9286,we=i.__chunk_1554,Ne=i.__chunk_1372,Pe=i.__chunk_1751,Oe=i.__chunk_8260,Re=i.__chunk_7861,Se=i.__chunk_8568,Ae=i.__chunk_5779,Ce=i.__chunk_6044,je=i.__chunk_2113,Te=i.__chunk_4885,Ie=i.__chunk_709,Le=i.__chunk_6493,s=oe(m,m,m),Me=s.__chunk_6195,Fe=s.__chunk_2067,$e=s.__chunk_3584,Ue=s.__chunk_8385,De=s.__chunk_9220,Ke=s.__chunk_204,He=s.__chunk_4692,Be=s.__chunk_3240,qe=s.__chunk_1813,Xe=s.__chunk_7425,Ge=s.__chunk_2130,We=s.__chunk_8334,ze=s.__chunk_2055,Je=s.__chunk_605,Qe=s.__chunk_9701,Ve=s.__chunk_8751,Ye=s.__chunk_2701,Ze=s.__chunk_3815,et=s.__chunk_515,tt=s.__chunk_5833,_t=s.__chunk_110,nt=s.__chunk_7778,ot=s.__chunk_3822,ct=s.__chunk_7404,Q=ce(m,m,m),at=Q.__NEXT_FONT_MANIFEST,rt=Q.__REACT_LOADABLE_MANIFEST,kt=((a,h,M)=>(h._ENTRIES={},a.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-12dff3f396163146.js","static/chunks/f0b9fc38-b3839321ffe76441.js","static/chunks/956-6898126ca27ec5c7.js","static/chunks/main-app-9797fdcbbf05545e.js"],pages:{"/_app":["static/chunks/webpack-12dff3f396163146.js","static/chunks/framework-6e06c675866dc992.js","static/chunks/main-9e23f1960cf2a694.js","static/chunks/pages/_app-adf0729047cd661e.js"],"/_error":["static/chunks/webpack-12dff3f396163146.js","static/chunks/framework-6e06c675866dc992.js","static/chunks/main-9e23f1960cf2a694.js","static/chunks/pages/_error-e4400510ef24a1c3.js"]},ampFirstPages:[]},a.__BUILD_MANIFEST.lowPriorityFiles=["/static/On5yFyosbE-6_qM-VU954/_buildManifest.js",,"/static/On5yFyosbE-6_qM-VU954/_ssgManifest.js"],a.__REACT_LOADABLE_MANIFEST=rt,a.__NEXT_FONT_MANIFEST=at,a.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var k={},d={};function o(_){var u=d[_];if(u!==void 0)return u.exports;var r=d[_]={exports:{}},g=!0;try{k[_](r,r.exports,o),g=!1}finally{g&&delete d[_]}return r.exports}o.m=k,(()=>{var _=[];o.O=(u,r,g,f)=>{if(r){f=f||0;for(var p=_.length;p>0&&_[p-1][2]>f;p--)_[p]=_[p-1];_[p]=[r,g,f];return}for(var x=1/0,p=0;p<_.length;p++){for(var[r,g,f]=_[p],b=!0,y=0;y<r.length;y++)x>=f&&Object.keys(o.O).every(j=>o.O[j](r[y]))?r.splice(y--,1):(b=!1,f<x&&(x=f));if(b){_.splice(p--,1);var O=g();O!==void 0&&(u=O)}}return u}})(),o.n=_=>{var u=_&&_.__esModule?()=>_.default:()=>_;return o.d(u,{a:u}),u},o.d=(_,u)=>{for(var r in u)o.o(u,r)&&!o.o(_,r)&&Object.defineProperty(_,r,{enumerable:!0,get:u[r]})},o.e=()=>Promise.resolve(),o.g=function(){if(typeof h=="object")return h;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(_,u)=>Object.prototype.hasOwnProperty.call(_,u),o.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},(()=>{var _={993:0};o.O.j=g=>_[g]===0;var u=(g,f)=>{var p,x,[b,y,O]=f,A=0;if(b.some(F=>_[F]!==0)){for(p in y)o.o(y,p)&&(o.m[p]=y[p]);if(O)var C=O(o)}for(g&&g(f);A<b.length;A++)x=b[A],o.o(_,x)&&_[x]&&_[x][0](),_[x]=0;return o.O(C)},r=a.webpackChunk_N_E=a.webpackChunk_N_E||[];r.forEach(u.bind(null,0)),r.push=u.bind(null,r.push.bind(r))})()})(),(a.webpackChunk_N_E=a.webpackChunk_N_E||[]).push([[776],{7404:ct,3822:ot,7778:nt,110:_t,5833:tt,515:et,3815:Ze,2701:Ye,8751:Ve,9701:Qe,605:Je,2055:ze,8334:We,2130:Ge,7425:Xe,1813:qe,3240:Be,4692:He,204:Ke,9220:De,8385:Ue,3584:$e}]),(a.webpackChunk_N_E=a.webpackChunk_N_E||[]).push([[481],{6493:Le,709:Ie,4885:Te,2113:je,6044:Ce,5779:Ae,8568:Se,7861:Re,8260:Oe,1751:Pe,1372:Ne,1554:we,9286:ve,6637:Ee,2855:ye,7246:be,8364:xe,636:me,2600:fe,2672:ge,9470:de,737:ke}]),(a.webpackChunk_N_E=a.webpackChunk_N_E||[]).push([[745],{129:pe,3611:he,6079:ie,9160:se,9560:ue,2813:re}]),(a.webpackChunk_N_E=a.webpackChunk_N_E||[]).push([[688],{2067:Fe,6195:Me,4573:(k,d,o)=>{"use strict";o.r(d),o.d(d,{ComponentMod:()=>B,default:()=>q});var _={};o.r(_),o.d(_,{GET:()=>A,runtime:()=>O});var u={};o.r(u),o.d(u,{originalPathname:()=>K,patchFetch:()=>H,requestAsyncStorage:()=>F,routeModule:()=>C,serverHooks:()=>j,staticGenerationAsyncStorage:()=>L});var r=o(6637),g=o(1554),f=o(2130),p=o(7425),x=o(4381),b=o(4325),y=o(9560);let O="edge";async function A(D){let T=(0,x.O)(),R=new URL(D.url),$=R.searchParams.get("code"),E=R.searchParams.get("state"),e=D.headers.get("cookie")??"",c=e.split("; ").find(t=>t.startsWith("google_oauth_state="))?.split("=")[1],n=e.split("; ").find(t=>t.startsWith("google_code_verifier="))?.split("=")[1];if(!$||!E||!c||!n||E!==c)return new Response("Invalid OAuth callback",{status:400});try{let t=(0,b.vt)(T),v=await t.validateAuthorizationCode($,n),l=(0,y.yD)(v.idToken()),N={email:l.email||"",name:l.name||"",sub:l.sub||""};if(!N.email)throw Error("No email provided by Google");let S=await(0,b.y_)(T,N),{cookie:w}=await(0,b.hE)(T,S),P=`${T.APP_URL||"https://foundrcheck.com"}/profile`;return new Response(null,{status:302,headers:{Location:P,"Set-Cookie":[w,"google_oauth_state=; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=0","google_code_verifier=; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=0"].join(", ")}})}catch{return new Response(null,{status:302,headers:{Location:`${T.APP_URL||"https://foundrcheck.com"}/?error=oauth_failed`,"Set-Cookie":"google_oauth_state=; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=0, google_code_verifier=; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=0"}})}}let C=new g.AppRouteRouteModule({definition:{kind:f.x.APP_ROUTE,page:"/api/auth/google/callback/route",pathname:"/api/auth/google/callback",filename:"route",bundlePath:"app/api/auth/google/callback/route"},resolvedPagePath:"/home/noob/FoundrCheck/app/api/auth/google/callback/route.ts",nextConfigOutput:"",userland:_}),{requestAsyncStorage:F,staticGenerationAsyncStorage:L,serverHooks:j}=C,K="/api/auth/google/callback/route";function H(){return(0,p.XH)({serverHooks:j,staticGenerationAsyncStorage:L})}let B=u,q=r.a.wrap(C)},4381:le,4325:ae},k=>{var d=_=>k(k.s=_);k.O(0,[776,481,745],()=>d(4573));var o=k.O();(h._ENTRIES=typeof h._ENTRIES>"u"?{}:h._ENTRIES)["middleware_app/api/auth/google/callback/route"]=o}]),function(){let k={exports:{},loaded:!1};return function(o,_){var u=Object.create,r=Object.defineProperty,g=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,p=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,b=e=>r(e,"__esModule",{value:!0}),y=(e,c)=>{b(e);for(var n in c)r(e,n,{get:c[n],enumerable:!0})},O=(e,c,n)=>{if(c&&typeof c=="object"||typeof c=="function")for(let t of f(c))!x.call(e,t)&&t!=="default"&&r(e,t,{get:()=>c[t],enumerable:!(n=g(c,t))||n.enumerable});return e},A=e=>O(b(r(e!=null?u(p(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);y(_,{default:()=>T});var C=A((J(),te(U))),F="@next/request-context",L=Symbol.for(F),j=Symbol.for("internal.storage");function K(){let e=h;if(!e[L]){let c=new C.AsyncLocalStorage,n={get:()=>c.getStore(),[j]:c};e[L]=n}return e[L]}var H=K();function B(e,c){return H[j].run(e,c)}function q(e){let c={};return e&&e.forEach((n,t)=>{c[t]=n,t.toLowerCase()==="set-cookie"&&(c[t]=D(n))}),c}function D(e){let c=[],n=0,t,v,l,N,S;function w(){for(;n<e.length&&/\s/.test(e.charAt(n));)n+=1;return n<e.length}function P(){return v=e.charAt(n),v!=="="&&v!==";"&&v!==","}for(;n<e.length;){for(t=n,S=!1;w();)if(v=e.charAt(n),v===","){for(l=n,n+=1,w(),N=n;n<e.length&&P();)n+=1;n<e.length&&e.charAt(n)==="="?(S=!0,n=N,c.push(e.substring(t,l)),t=n):n=l+1}else n+=1;(!S||n>=e.length)&&c.push(e.substring(t,e.length))}return c}function T(e){let c=e.staticRoutes.map(t=>({regexp:new RegExp(t.namedRegex),page:t.page})),n=e.dynamicRoutes?.map(t=>({regexp:new RegExp(t.namedRegex),page:t.page}))||[];return async function(t,v){let l=new URL(t.url).pathname,N={};if(e.nextConfig?.basePath&&l.startsWith(e.nextConfig.basePath)&&(l=l.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let w of e.nextConfig.i18n.locales){let P=new RegExp(`^/${w}($|/)`,"i");if(l.match(P)){l=l.replace(P,"/")||"/";break}}for(let w of c)if(w.regexp.exec(l)){N.name=w.page;break}if(!N.name){let w=$(l);for(let P of n||[]){if(w&&!$(P.page))continue;let W=P.regexp.exec(l);if(W){N={name:P.page,params:W.groups};break}}}let S=await B({waitUntil:v.waitUntil},()=>h._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:t.url,method:t.method,headers:q(t.headers),ip:R(t.headers,E.Ip),geo:{city:R(t.headers,E.City,!0),country:R(t.headers,E.Country,!0),latitude:R(t.headers,E.Latitude),longitude:R(t.headers,E.Longitude),region:R(t.headers,E.Region,!0)},nextConfig:e.nextConfig,page:N,body:t.body}}));return S.waitUntil&&v.waitUntil(S.waitUntil),S.response}}function R(e,c,n=!1){let t=e.get(c)||void 0;return n&&t?decodeURIComponent(t):t}function $(e){return e==="/api"||e.startsWith("/api/")}var E;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(E||(E={}))}(k,k.exports),k.exports}.call({}).default({name:"app/api/auth/google/callback/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/leaderboard",regex:"^/leaderboard(?:/)?$",routeKeys:{},namedRegex:"^/leaderboard(?:/)?$"},{page:"/login",regex:"^/login(?:/)?$",routeKeys:{},namedRegex:"^/login(?:/)?$"},{page:"/profile",regex:"^/profile(?:/)?$",routeKeys:{},namedRegex:"^/profile(?:/)?$"},{page:"/submit",regex:"^/submit(?:/)?$",routeKeys:{},namedRegex:"^/submit(?:/)?$"}],dynamicRoutes:[{page:"/api/auth/[...lucia]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPlucia:"nxtPlucia"},namedRegex:"^/api/auth/(?<nxtPlucia>.+?)(?:/)?$"},{page:"/api/ideas/[id]",regex:"^/api/ideas/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/ideas/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/ideas/[id]",regex:"^/ideas/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/ideas/(?<nxtPid>[^/]+?)(?:/)?$"}],nextConfig:{basePath:""}})))(m,m,m);export{kt as default};
