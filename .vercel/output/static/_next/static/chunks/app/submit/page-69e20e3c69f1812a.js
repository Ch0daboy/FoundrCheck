(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[369],{50:function(e,t,r){Promise.resolve().then(r.bind(r,2933))},2933:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b},runtime:function(){return x}});var n,o=r(3803),i=r(2571),l=(0,i.forwardRef)((e,t)=>{let{as:r="div",...n}=e;return(0,o.jsx)(r,{...n,ref:t})}),a="cf-turnstile-script",u="onloadTurnstileCallback",c=e=>!!document.getElementById(e),s=e=>{let{render:t="explicit",onLoadCallbackName:r=u,scriptOptions:{nonce:n="",defer:o=!0,async:i=!0,id:l="",appendTo:s,onError:d,crossOrigin:f=""}={}}=e,m=l||a;if(c(m))return;let p=document.createElement("script");p.id=m,p.src="".concat("https://challenges.cloudflare.com/turnstile/v0/api.js","?onload=").concat(r,"&render=").concat(t),document.querySelector('script[src="'.concat(p.src,'"]'))||(p.defer=!!o,p.async=!!i,n&&(p.nonce=n),f&&(p.crossOrigin=f),d&&(p.onerror=d,delete window[r]),("body"===s?document.body:document.getElementsByTagName("head")[0]).appendChild(p))},d={normal:{width:300,height:65},compact:{width:150,height:140},invisible:{width:0,height:0,overflow:"hidden"},flexible:{minWidth:300,width:"100%",height:65},interactionOnly:{width:"fit-content",height:"auto",display:"flex"}},f="unloaded",m=new Promise((e,t)=>{n={resolve:e,reject:t},"ready"===f&&e(void 0)}),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return"unloaded"===f&&(f="loading",window[e]=()=>{n.resolve(),f="ready",delete window[e]}),m},h=(0,i.forwardRef)((e,t)=>{let{scriptOptions:r,options:n={},siteKey:m,onWidgetLoad:h,onSuccess:v,onExpire:x,onError:b,onBeforeInteractive:g,onAfterInteractive:y,onUnsupported:w,onTimeout:T,onLoadScript:E,id:N,style:k,as:S="div",injectScript:j=!0,rerenderOnCallbackChange:I=!1,...O}=e,C=n.size,L=(0,i.useCallback)(()=>typeof C>"u"?{}:"execute"===n.execution?d.invisible:"interaction-only"===n.appearance?d.interactionOnly:d[C],[n.execution,C,n.appearance]),[R,A]=(0,i.useState)(L()),_=(0,i.useRef)(null),[F,P]=(0,i.useState)(!1),B=(0,i.useRef)(),D=(0,i.useRef)(!1),U=N||"cf-turnstile",K=(0,i.useRef)({onSuccess:v,onError:b,onExpire:x,onBeforeInteractive:g,onAfterInteractive:y,onUnsupported:w,onTimeout:T});(0,i.useEffect)(()=>{I||(K.current={onSuccess:v,onError:b,onExpire:x,onBeforeInteractive:g,onAfterInteractive:y,onUnsupported:w,onTimeout:T})});let z=(null==r?void 0:r.id)||a,J=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,[t,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let t=()=>{c(e)&&r(!0)},n=new MutationObserver(t);return n.observe(document,{childList:!0,subtree:!0}),t(),()=>{n.disconnect()}},[e]),t}(z),M=(null==r?void 0:r.onLoadCallbackName)||u,W=n.appearance||"always",Y=(0,i.useMemo)(()=>({sitekey:m,action:n.action,cData:n.cData,theme:n.theme||"auto",language:n.language||"auto",tabindex:n.tabIndex,"response-field":n.responseField,"response-field-name":n.responseFieldName,size:function(e){if("invisible"!==e&&"interactionOnly"!==e)return e}(C),retry:n.retry||"auto","retry-interval":n.retryInterval||8e3,"refresh-expired":n.refreshExpired||"auto","refresh-timeout":n.refreshTimeout||"auto",execution:n.execution||"render",appearance:n.appearance||"always","feedback-enabled":n.feedbackEnabled||!0,callback:e=>{var t,r;D.current=!0,I?null==v||v(e):null===(t=(r=K.current).onSuccess)||void 0===t||t.call(r,e)},"error-callback":I?b:function(){for(var e,t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return null===(e=(t=K.current).onError)||void 0===e?void 0:e.call(t,...n)},"expired-callback":I?x:function(){for(var e,t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return null===(e=(t=K.current).onExpire)||void 0===e?void 0:e.call(t,...n)},"before-interactive-callback":I?g:function(){for(var e,t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return null===(e=(t=K.current).onBeforeInteractive)||void 0===e?void 0:e.call(t,...n)},"after-interactive-callback":I?y:function(){for(var e,t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return null===(e=(t=K.current).onAfterInteractive)||void 0===e?void 0:e.call(t,...n)},"unsupported-callback":I?w:function(){for(var e,t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return null===(e=(t=K.current).onUnsupported)||void 0===e?void 0:e.call(t,...n)},"timeout-callback":I?T:function(){for(var e,t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return null===(e=(t=K.current).onTimeout)||void 0===e?void 0:e.call(t,...n)}}),[n.action,n.appearance,n.cData,n.execution,n.language,n.refreshExpired,n.responseField,n.responseFieldName,n.retry,n.retryInterval,n.tabIndex,n.theme,n.feedbackEnabled,n.refreshTimeout,m,C,I,I?v:null,I?b:null,I?x:null,I?g:null,I?y:null,I?w:null,I?T:null]),q=(0,i.useCallback)(()=>"u">typeof window&&!!window.turnstile,[]);return(0,i.useEffect)(function(){j&&!F&&s({onLoadCallbackName:M,scriptOptions:{...r,id:z}})},[j,F,r,z]),(0,i.useEffect)(function(){"ready"!==f&&p(M).then(()=>P(!0)).catch(console.error)},[]),(0,i.useEffect)(function(){if(!_.current||!F)return;let e=!1;return(async()=>{if(e||!_.current)return;let t=window.turnstile.render(_.current,Y);B.current=t,B.current&&(null==h||h(B.current))})(),()=>{e=!0,B.current&&(window.turnstile.remove(B.current),D.current=!1)}},[U,F,Y]),(0,i.useImperativeHandle)(t,()=>{let{turnstile:e}=window;return{getResponse(){if(!(null==e?void 0:e.getResponse)||!B.current||!q()){console.warn("Turnstile has not been loaded");return}return e.getResponse(B.current)},async getResponsePromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return new Promise((r,n)=>{let o,i=async()=>{if(D.current&&window.turnstile&&B.current)try{let e=window.turnstile.getResponse(B.current);return o&&clearTimeout(o),e?r(e):n(Error("No response received"))}catch(e){return o&&clearTimeout(o),console.warn("Failed to get response",e),n(Error("Failed to get response"))}o||(o=setTimeout(()=>{o&&clearTimeout(o),n(Error("Timeout"))},e)),await new Promise(e=>setTimeout(e,t)),await i()};i()})},reset(){if(!(null==e?void 0:e.reset)||!B.current||!q()){console.warn("Turnstile has not been loaded");return}"execute"===n.execution&&A(d.invisible);try{D.current=!1,e.reset(B.current)}catch(e){console.warn("Failed to reset Turnstile widget ".concat(B),e)}},remove(){if(!(null==e?void 0:e.remove)||!B.current||!q()){console.warn("Turnstile has not been loaded");return}A(d.invisible),D.current=!1,e.remove(B.current),B.current=null},render(){if(!(null==e?void 0:e.render)||!_.current||!q()||B.current){console.warn("Turnstile has not been loaded or container not found");return}let t=e.render(_.current,Y);return B.current=t,B.current&&(null==h||h(B.current)),"execute"!==n.execution&&A(C?d[C]:{}),t},execute(){if("execute"!==n.execution){console.warn('Execution mode is not set to "execute"');return}if(!(null==e?void 0:e.execute)||!_.current||!B.current||!q()){console.warn("Turnstile has not been loaded or container not found");return}e.execute(_.current,Y),A(C?d[C]:{})},isExpired:()=>(null==e?void 0:e.isExpired)&&B.current&&q()?e.isExpired(B.current):(console.warn("Turnstile has not been loaded"),!1)}},[B,n.execution,C,Y,_,q,F,h]),(0,i.useEffect)(()=>{J&&!F&&window.turnstile&&P(!0)},[F,J]),(0,i.useEffect)(()=>{A(L())},[n.execution,C,W]),(0,i.useEffect)(()=>{J&&"function"==typeof E&&E()},[J]),(0,o.jsx)(l,{ref:_,as:S,id:U,style:{...R,...k},...O})});h.displayName="Turnstile";var v=r(8527);let x="edge";function b(){let[e,t]=(0,i.useState)(""),[r,n]=(0,i.useState)(""),[l,a]=(0,i.useState)(!1),[u,c]=(0,i.useState)(null),[s,d]=(0,i.useState)(null),[f,m]=(0,i.useState)(null);async function p(t){if(t.preventDefault(),!s){m("Please complete the Turnstile verification");return}if(!e.trim()||!r.trim()){m("Please fill in all fields");return}if(r.length<20){m("Description must be at least 20 characters");return}a(!0),m(null);try{let t=await fetch("/api/ideas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:r,turnstileToken:s})});if(!t.ok){let e=await t.text();throw Error(e)}let n=await t.json();c(n)}catch(e){m(e instanceof Error?e.message:"Submission failed")}finally{a(!1)}}return(0,o.jsxs)("main",{className:"max-w-2xl mx-auto p-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Submit an Idea"}),(0,o.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium mb-1",children:"Title"}),(0,o.jsx)("input",{id:"title",className:"w-full border rounded p-2",placeholder:"Your idea title",value:e,onChange:e=>t(e.target.value),maxLength:120,disabled:l}),(0,o.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.length,"/120 characters"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium mb-1",children:"Description"}),(0,o.jsx)("textarea",{id:"description",className:"w-full border rounded p-2 min-h-[200px]",placeholder:"Describe your startup idea in detail...",value:r,onChange:e=>n(e.target.value),maxLength:2e3,disabled:l}),(0,o.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[r.length,"/2000 characters (minimum 20)"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Verification"}),(0,o.jsx)(h,{siteKey:v.env.NEXT_PUBLIC_TURNSTILE_SITE_KEY||"",onSuccess:e=>d(e),onError:()=>d(null),onExpire:()=>d(null)})]}),f&&(0,o.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:f}),(0,o.jsx)("button",{type:"submit",disabled:l||!s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Submitting...":"Submit Idea"})]}),u&&(0,o.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded",children:[(0,o.jsx)("h3",{className:"font-medium mb-2",children:"Submission Result"}),(0,o.jsx)("pre",{className:"text-xs bg-white p-3 rounded overflow-auto",children:JSON.stringify(u,null,2)})]})]})}},8527:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(1185)},1185:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();var u=[],c=!1,s=-1;function d(){c&&n&&(c=!1,n.length?u=n.concat(u):s=-1,u.length&&f())}function f(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(n=u,u=[];++s<t;)n&&n[s].run();s=-1,t=u.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new m(e,t)),1!==u.length||c||a(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}},l=!0;try{t[e](i,i.exports,n),l=!1}finally{l&&delete r[e]}return i.exports}n.ab="//";var o=n(229);e.exports=o}()}},function(e){e.O(0,[888,956,744],function(){return e(e.s=50)}),_N_E=e.O()}]);