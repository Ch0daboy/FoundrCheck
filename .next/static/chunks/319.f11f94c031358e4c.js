"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{2319:function(e,r,n){n.r(r),n.d(r,{DEFAULT_CONTAINER_ID:function(){return a},DEFAULT_ONLOAD_NAME:function(){return s},DEFAULT_SCRIPT_ID:function(){return l},SCRIPT_URL:function(){return u},Turnstile:function(){return w}});var t,o=n(2571),i=n(3803),c=(0,o.forwardRef)((e,r)=>{let{as:n="div",...t}=e;return(0,i.jsx)(n,{...t,ref:r})}),u="https://challenges.cloudflare.com/turnstile/v0/api.js",l="cf-turnstile-script",a="cf-turnstile",s="onloadTurnstileCallback",d=e=>!!document.getElementById(e),f=e=>{let{render:r="explicit",onLoadCallbackName:n=s,scriptOptions:{nonce:t="",defer:o=!0,async:i=!0,id:c="",appendTo:a,onError:f,crossOrigin:p=""}={}}=e,v=c||l;if(d(v))return;let h=document.createElement("script");h.id=v,h.src="".concat(u,"?onload=").concat(n,"&render=").concat(r),document.querySelector('script[src="'.concat(h.src,'"]'))||(h.defer=!!o,h.async=!!i,t&&(h.nonce=t),p&&(h.crossOrigin=p),f&&(h.onerror=f,delete window[n]),("body"===a?document.body:document.getElementsByTagName("head")[0]).appendChild(h))},p={normal:{width:300,height:65},compact:{width:150,height:140},invisible:{width:0,height:0,overflow:"hidden"},flexible:{minWidth:300,width:"100%",height:65},interactionOnly:{width:"fit-content",height:"auto",display:"flex"}},v="unloaded",h=new Promise((e,r)=>{t={resolve:e,reject:r},"ready"===v&&e(void 0)}),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return"unloaded"===v&&(v="loading",window[e]=()=>{t.resolve(),v="ready",delete window[e]}),h},w=(0,o.forwardRef)((e,r)=>{let{scriptOptions:n,options:t={},siteKey:u,onWidgetLoad:h,onSuccess:w,onExpire:y,onError:b,onBeforeInteractive:g,onAfterInteractive:E,onUnsupported:x,onTimeout:T,onLoadScript:k,id:I,style:A,as:R="div",injectScript:C=!0,rerenderOnCallbackChange:N=!1,...O}=e,S=t.size,L=(0,o.useCallback)(()=>typeof S>"u"?{}:"execute"===t.execution?p.invisible:"interaction-only"===t.appearance?p.interactionOnly:p[S],[t.execution,S,t.appearance]),[_,D]=(0,o.useState)(L()),F=(0,o.useRef)(null),[U,B]=(0,o.useState)(!1),P=(0,o.useRef)(),j=(0,o.useRef)(!1),M=I||a,z=(0,o.useRef)({onSuccess:w,onError:b,onExpire:y,onBeforeInteractive:g,onAfterInteractive:E,onUnsupported:x,onTimeout:T});(0,o.useEffect)(()=>{N||(z.current={onSuccess:w,onError:b,onExpire:y,onBeforeInteractive:g,onAfterInteractive:E,onUnsupported:x,onTimeout:T})});let W=(null==n?void 0:n.id)||l,q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,[r,n]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let r=()=>{d(e)&&n(!0)},t=new MutationObserver(r);return t.observe(document,{childList:!0,subtree:!0}),r(),()=>{t.disconnect()}},[e]),r}(W),H=(null==n?void 0:n.onLoadCallbackName)||s,K=t.appearance||"always",G=(0,o.useMemo)(()=>({sitekey:u,action:t.action,cData:t.cData,theme:t.theme||"auto",language:t.language||"auto",tabindex:t.tabIndex,"response-field":t.responseField,"response-field-name":t.responseFieldName,size:function(e){if("invisible"!==e&&"interactionOnly"!==e)return e}(S),retry:t.retry||"auto","retry-interval":t.retryInterval||8e3,"refresh-expired":t.refreshExpired||"auto","refresh-timeout":t.refreshTimeout||"auto",execution:t.execution||"render",appearance:t.appearance||"always","feedback-enabled":t.feedbackEnabled||!0,callback:e=>{var r,n;j.current=!0,N?null==w||w(e):null===(r=(n=z.current).onSuccess)||void 0===r||r.call(n,e)},"error-callback":N?b:function(){for(var e,r,n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return null===(e=(r=z.current).onError)||void 0===e?void 0:e.call(r,...t)},"expired-callback":N?y:function(){for(var e,r,n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return null===(e=(r=z.current).onExpire)||void 0===e?void 0:e.call(r,...t)},"before-interactive-callback":N?g:function(){for(var e,r,n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return null===(e=(r=z.current).onBeforeInteractive)||void 0===e?void 0:e.call(r,...t)},"after-interactive-callback":N?E:function(){for(var e,r,n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return null===(e=(r=z.current).onAfterInteractive)||void 0===e?void 0:e.call(r,...t)},"unsupported-callback":N?x:function(){for(var e,r,n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return null===(e=(r=z.current).onUnsupported)||void 0===e?void 0:e.call(r,...t)},"timeout-callback":N?T:function(){for(var e,r,n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return null===(e=(r=z.current).onTimeout)||void 0===e?void 0:e.call(r,...t)}}),[t.action,t.appearance,t.cData,t.execution,t.language,t.refreshExpired,t.responseField,t.responseFieldName,t.retry,t.retryInterval,t.tabIndex,t.theme,t.feedbackEnabled,t.refreshTimeout,u,S,N,N?w:null,N?b:null,N?y:null,N?g:null,N?E:null,N?x:null,N?T:null]),J=(0,o.useCallback)(()=>"u">typeof window&&!!window.turnstile,[]);return(0,o.useEffect)(function(){C&&!U&&f({onLoadCallbackName:H,scriptOptions:{...n,id:W}})},[C,U,n,W]),(0,o.useEffect)(function(){"ready"!==v&&m(H).then(()=>B(!0)).catch(console.error)},[]),(0,o.useEffect)(function(){if(!F.current||!U)return;let e=!1;return(async()=>{if(e||!F.current)return;let r=window.turnstile.render(F.current,G);P.current=r,P.current&&(null==h||h(P.current))})(),()=>{e=!0,P.current&&(window.turnstile.remove(P.current),j.current=!1)}},[M,U,G]),(0,o.useImperativeHandle)(r,()=>{let{turnstile:e}=window;return{getResponse(){if((null==e?void 0:e.getResponse)&&P.current&&J())return e.getResponse(P.current)},async getResponsePromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return new Promise((n,t)=>{let o,i=async()=>{if(j.current&&window.turnstile&&P.current)try{let e=window.turnstile.getResponse(P.current);return o&&clearTimeout(o),e?n(e):t(Error("No response received"))}catch(e){return o&&clearTimeout(o),console.warn("Failed to get response",e),t(Error("Failed to get response"))}o||(o=setTimeout(()=>{o&&clearTimeout(o),t(Error("Timeout"))},e)),await new Promise(e=>setTimeout(e,r)),await i()};i()})},reset(){if((null==e?void 0:e.reset)&&P.current&&J()){"execute"===t.execution&&D(p.invisible);try{j.current=!1,e.reset(P.current)}catch(e){}}},remove(){(null==e?void 0:e.remove)&&P.current&&J()&&(D(p.invisible),j.current=!1,e.remove(P.current),P.current=null)},render(){if(!(null==e?void 0:e.render)||!F.current||!J()||P.current)return;let r=e.render(F.current,G);return P.current=r,P.current&&(null==h||h(P.current)),"execute"!==t.execution&&D(S?p[S]:{}),r},execute(){"execute"===t.execution&&(null==e?void 0:e.execute)&&F.current&&P.current&&J()&&(e.execute(F.current,G),D(S?p[S]:{}))},isExpired:()=>(null==e?void 0:e.isExpired)&&P.current&&J()?e.isExpired(P.current):(console.warn("Turnstile has not been loaded"),!1)}},[P,t.execution,S,G,F,J,U,h]),(0,o.useEffect)(()=>{q&&!U&&window.turnstile&&B(!0)},[U,q]),(0,o.useEffect)(()=>{D(L())},[t.execution,S,K]),(0,o.useEffect)(()=>{q&&"function"==typeof k&&k()},[q]),(0,i.jsx)(c,{ref:F,as:R,id:M,style:{..._,...A},...O})});w.displayName="Turnstile"}}]);