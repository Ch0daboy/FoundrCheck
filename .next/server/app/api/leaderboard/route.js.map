{"version":3,"file":"app/api/leaderboard/route.js","mappings":"oFAAAA,CAAAA,EAAAC,OAAA,CAAAC,QAAA,0CCAAF,CAAAA,EAAAC,OAAA,CAAAC,QAAA,sWCAO,IAAMC,EAAU,OAGhB,eAAeC,EAAIC,CAAa,EACrC,IAAMC,EAAMC,CAAAA,EAAAA,EAAAA,CAAAA,IAENC,EAAQC,KAAKC,GAAG,CAAC,IAAKC,OAAOC,IADnBC,IAAIR,EAAKO,GAAG,EACWE,YAAY,CAACC,GAAG,CAAC,UAAY,MAYpE,OAAO,IAAIC,SAASC,KAAKC,SAAS,CARrB,CAACC,CAHF,MAAMb,EAAIc,EAAE,CAACC,OAAO,CAC9B,0JACAC,IAAI,CAACd,GAAOe,GAAG,IACCC,OAAO,EAAI,EAAE,EAAEC,GAAG,CAAC,GAAa,EAChDC,GAAIC,EAAED,EAAE,CACRE,MAAOD,EAAEC,KAAK,CACdC,MAAOF,EAAEE,KAAK,CACdC,iBAAkBH,EAAEG,gBAAgB,CACpCC,WAAYJ,EAAEI,UAAU,CACxBC,WAAY,EACd,KAC0C,CAAEC,OAAQ,GAAI,EAC1D,CCZA,IAAAC,EAAA,IAAwBC,EAAAC,mBAAmB,EAC3CC,WAAA,CACAC,KAAcC,EAAAC,CAAS,CAAAC,SAAA,CACvBC,KAAA,yBACAC,SAAA,mBACAC,SAAA,QACAC,WAAA,2BACA,EACAC,iBAAA,sDACAC,iBAVA,GAWAC,SAAYC,CACZ,GAIA,CAAQC,oBAAAA,CAAA,CAAAC,6BAAAA,CAAA,CAAAC,YAAAA,CAAA,EAAiElB,EACzEmB,EAAA,yBACA,SAAAC,IACA,MAAW,GAAAC,EAAAC,EAAA,EAAW,CACtBJ,YAAAA,EACAD,6BAAAA,CACA,EACA,CC1BO,IAAAM,EAAqBC,EAC5BC,EAAeC,EAAAC,CAAsB,CAAAC,IAAA,CAAM5B,+DCSpC,SAAS5B,IACd,MAAOyD,CAAAA,EAAAA,EAAAA,iBAAAA,IAAoBzD,GAAG,AAChC","sources":["webpack://_N_E/external commonjs \"node:async_hooks\"","webpack://_N_E/external commonjs \"node:buffer\"","webpack://_N_E/./app/api/leaderboard/route.ts","webpack://_N_E/./app/api/leaderboard/route.ts?b1e0","webpack://_N_E/?793e","webpack://_N_E/./lib/env.ts"],"sourcesContent":["module.exports = require(\"node:async_hooks\");","module.exports = require(\"node:buffer\");","export const runtime = \"edge\";\nimport { env as getEnv } from \"@/lib/env\";\n\nexport async function GET(_req: Request) {\n  const env = getEnv();\n  const url = new URL(_req.url);\n  const limit = Math.min(100, Number(url.searchParams.get(\"limit\") ?? 100));\n  const res = await env.DB.prepare(\n    `SELECT id, title, score, analysis_summary, created_at, '' AS owner_anon FROM ideas WHERE score IS NOT NULL ORDER BY score DESC, created_at ASC LIMIT ?`\n  ).bind(limit).all();\n  const rows = (res.results ?? []).map((r: any) => ({\n    id: r.id,\n    title: r.title,\n    score: r.score,\n    analysis_summary: r.analysis_summary,\n    created_at: r.created_at,\n    owner_anon: true,\n  }));\n  return new Response(JSON.stringify(rows), { status: 200 });\n}\n\n\n","import { AppRouteRouteModule } from \"next/dist/server/future/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/future/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"/home/noob/FoundrCheck/app/api/leaderboard/route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/leaderboard/route\",\n        pathname: \"/api/leaderboard\",\n        filename: \"route\",\n        bundlePath: \"app/api/leaderboard/route\"\n    },\n    resolvedPagePath: \"/home/noob/FoundrCheck/app/api/leaderboard/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/leaderboard/route\";\nfunction patchFetch() {\n    return _patchFetch({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\nexport { routeModule, requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, originalPathname, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map","import { EdgeRouteModuleWrapper } from \"next/dist/server/web/edge-route-module-wrapper\";\n// Import the userland code.\nimport * as module from \"next-app-loader?name=app%2Fapi%2Fleaderboard%2Froute&page=%2Fapi%2Fleaderboard%2Froute&pagePath=private-next-app-dir%2Fapi%2Fleaderboard%2Froute.ts&appDir=%2Fhome%2Fnoob%2FFoundrCheck%2Fapp&appPaths=%2Fapi%2Fleaderboard%2Froute&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!private-next-app-dir/api/leaderboard/route.ts?__next_edge_ssr_entry__\";\nexport const ComponentMod = module;\nexport default EdgeRouteModuleWrapper.wrap(module.routeModule);\n\n//# sourceMappingURL=edge-app-route.js.map","import { getRequestContext } from \"@cloudflare/next-on-pages\";\n\nexport type Bindings = {\n  DB: D1Database;\n  IDEA_QUEUE: Queue;\n  PERPLEXITY_API_KEY: string;\n  PERPLEXITY_MODEL: string;\n  APP_TIMEZONE?: string;\n  RATE_LIMIT_DAILY?: string | number;\n  TURNSTILE_SECRET_KEY?: string;\n  NEXT_PUBLIC_TURNSTILE_SITE_KEY?: string;\n};\n\nexport function env(): Bindings {\n  return getRequestContext().env as unknown as Bindings;\n}\n\n\n"],"names":["module","exports","require","runtime","GET","_req","env","getEnv","limit","Math","min","Number","url","URL","searchParams","get","Response","JSON","stringify","res","DB","prepare","bind","all","results","map","id","r","title","score","analysis_summary","created_at","owner_anon","status","routeModule","module_compiled","AppRouteRouteModule","definition","kind","route_kind","x","APP_ROUTE","page","pathname","filename","bundlePath","resolvedPagePath","nextConfigOutput","userland","route_namespaceObject","requestAsyncStorage","staticGenerationAsyncStorage","serverHooks","originalPathname","patchFetch","patch_fetch","XH","ComponentMod","route_next_edge_ssr_entry_namespaceObject","next_edge_app_route_loaderabsolutePagePath_private_next_app_dir_2Fapi_2Fleaderboard_2Froute_ts_page_2Fapi_2Fleaderboard_2Froute_appDirLoader_bmV4dC1hcHAtbG9hZGVyP25hbWU9YXBwJTJGYXBpJTJGbGVhZGVyYm9hcmQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmxlYWRlcmJvYXJkJTJGcm91dGUmcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZsZWFkZXJib2FyZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGbm9vYiUyRkZvdW5kckNoZWNrJTJGYXBwJmFwcFBhdGhzPSUyRmFwaSUyRmxlYWRlcmJvYXJkJTJGcm91dGUmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0Qh_nextConfigOutput_preferredRegion_middlewareConfig_e30_3D_","edge_route_module_wrapper","a","wrap","getRequestContext"],"sourceRoot":""}